# Homework2

## Общее описание
Разработать инструмент командной строки для визуализации графа 
зависимостей, включая транзитивные зависимости. Сторонние средства для 
получения зависимостей использовать нельзя.  
Зависимости определяются для git-репозитория. Для описания графа 
зависимостей используется представление Mermaid. Визуализатор должен 
выводить результат в виде сообщения об успешном выполнении и сохранять граф 
в файле формата png.  
Построить граф зависимостей для коммитов, в узлах которого находятся 
связи с файлами и папками, представленными уникальными узлами. Граф 
необходимо строить для ветки с заданным именем. 
Ключами командной строки задаются:   
• Путь к программе для визуализации графов.  
• Путь к анализируемому репозиторию.  
• Путь к файлу с изображением графа зависимостей.  
• Имя ветки в репозитории.  
Все функции визуализатора зависимостей должны быть покрыты тестами.

## Описание всех функций и настроек

### Функции:
1. **`read_git_object(repo_path, object_hash)`**  
   Читает объект Git из хранилища `.git/objects` и возвращает его содержимое.  
   **Параметры**:  
   - `repo_path` — путь к репозиторию.  
   - `object_hash` — хэш объекта.  
   **Результат**: Байтовое содержимое объекта.

2. **`parse_commit_object(repo_path, commit_hash)`**  
   Извлекает дерево, родителей и файлы для указанного коммита.  
   **Параметры**:  
   - `repo_path` — путь к репозиторию.  
   - `commit_hash` — хэш коммита.  
   **Результат**: Словарь с информацией о дереве, родителях и файлах.

3. **`get_files_from_tree(repo_path, tree_hash, path_prefix="")`**  
   Рекурсивно обходит дерево Git и извлекает пути файлов.  
   **Параметры**:  
   - `repo_path` — путь к репозиторию.  
   - `tree_hash` — хэш дерева.  
   - `path_prefix` — текущий префикс пути (для вложенных папок).  
   **Результат**: Список путей файлов.

4. **`get_commits(repo_path, branch_name)`**  
   Извлекает список всех коммитов в указанной ветке.  
   **Параметры**:  
   - `repo_path` — путь к репозиторию.  
   - `branch_name` — имя ветки.  
   **Результат**: Список словарей с хэшами коммитов и их файлами.

5. **`parse_commits(commits)`**  
   Создаёт граф зависимости файлов и коммитов.  
   **Параметры**:  
   - `commits` — список коммитов.  
   **Результат**: Словарь, где ключи — файлы, значения — список коммитов.

6. **`generate_mermaid(graph)`**  
   Генерирует синтаксис Mermaid для графа зависимостей.  
   **Параметры**:  
   - `graph` — словарь зависимостей файлов и коммитов.  
   **Результат**: Строка в формате Mermaid.

7. **`save_mermaid_to_png(mermaid_code, output_path, mermaid_cli_path)`**  
   Конвертирует Mermaid-граф в PNG с помощью `mermaid-cli`.  
   **Параметры**:  
   - `mermaid_code` — код диаграммы Mermaid.  
   - `output_path` — путь для сохранения PNG.  
   - `mermaid_cli_path` — путь к `mermaid-cli`.

## Граф в файле формата png.
![image](https://github.com/user-attachments/assets/7d80bbcc-a00b-478d-a1f4-9bca72134853)

## Результат прогона тестов.
![image](https://github.com/user-attachments/assets/339254cf-381d-4ad9-88c3-126c2002883d)

